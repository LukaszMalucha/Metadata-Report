<template>
<div id="page-index">
  <div class="row campaign-header">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-2 text-left plain-element">
        <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/campaign.jpg" class="img responsive campaign-restbank" alt="Campaign Start">
      </div>
      <div class="col-xs-12 col-sm-12 col-md-9 col-lg-10 plain-element">
        <div class="row summary">
          <div class="box">
            <h5>Home Insurance Ad Campaign - Business Case Study</h5>
          </div>
          <p>RESTBank is launching a new product - <span class="purple-font">Home Insurance</span>. Management Team already
            decided about
            the most of
            the Advertising Campaign details but it's not sure which of the <span class="purple-font">8 Ad Projects</span>
            will be most
            successful in
            convincing customers to buy an Insurance. <span class="purple-font">Ad Campaign</span> is already low on budget,
            so long
            trials are
            not an option. Solution has to be swift, with proven effectiveness and low-cost. <span class="purple-font">AI
              Team</span> came
            up
            with an idea of building an algorithm that will just do the thing.
            Implementation will cost nearly nothing and it'll be able to determine what is the best advert
            within couple of hours. Challenge accepted?</p>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-cards">
    <div class="row row-campaign">
      <div class="col-md-3 col-left">
        <div class="section-left">
          <div class="section-heading text-left">
            The Trial
          </div>
          <p>Our trial will last <span class="purple-font">10.000 rounds</span>. Each round is a customer that enters
              RESTBank website.
              Next we display to that person one of the designed <span class="purple-font">Ad Projects</span>. Customer either
              click it
              (success) or not (fail). Project with most clicks win. We'll compare two methods - first when we
              display <span class="purple-font">Random Advert</span> and the second where the <span class="purple-font">A.I.
                Algorithm</span> controls ad
              selection.
          </p>
          <div class="section-heading text-left">
            The Environment
          </div>
           <p>Let's pretend that we have a <span class="purple-font">Crystal Ball</span> for a moment. Below, you'll define
              <span class="purple-font">Customer
                Ad Preferences</span>.
              So we'll know from the beginning which ad has the <span class="purple-font">best conversion rate</span>. But we
              won't pass that knowledge to the <span class="purple-font">A.I. Algorithm</span>. If it can figure it out by
              itself. It
              has to be significantly faster than <span class="purple-font">Random Method</span> if we want to convince the
              Management.
            </p>
          <div class="section-heading text-left">
            The Success Criteria
          </div>
           <p>We'll compare absolute and relative returns between Random Sampling and <span class="purple-font">Thompson
              Sampling</span>
              methods.
              RESTBank's profit on each insurance is <span class="purple-font">1000 USD</span> and that's how much is worthy
              one
              customer
              difference between two methods. So if the <span class="purple-font">A.I. Algorithm</span> can figure out the
              most
              effective Ad after 2.000 customer visits, it'll <span class="purple-font">drastically decrease campaign
                costs</span>.
            </p>
        </div>
      </div>
      <div class="col-md-9 col-right">
        <div class="section-right">
          <div class="section-heading text-left">
            Proposed Advert Designs
          </div>
          <div class="row row-medium-adverts">
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-left">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/female_trust_cash.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-center-left">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/female_trust_car.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-center-right">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/female_familyhome_cash.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-right">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/female_familyhome_car.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
          </div>
          <div class="row  row-medium-adverts">
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-left">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/family_trust_cash.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-center-left">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/family_trust_car.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-center-right">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/family_familyhome_cash.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
             <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-advert-right">
                <div class="single-advert-left">
                  <img src="https://leanbank.s3-eu-west-1.amazonaws.com/static/img/campaign/family_familyhome_car.png"
                       class="img responsive img-advert-medium" alt="Ad Campaign"/>
                </div>
             </div>
          </div>
          <br>
          <div class="section-heading text-left">
            Predefine Statistical Customer Preferences
          </div>
          <form  id="personalityForm" @submit.prevent="onSubmit">
            <div class="row plain-element">
                <div class="col-md-4 col-lg-4">
                    <div class="row plain-element">
                        <h5>RESTBank customers will be more likely to buy home insurance if it is advertised by:</h5>
                    </div>
                    <div class="row text-left row-choice">
                        <div class="radio">
                            <label><input v-model="answer1" value="female" type="radio" name="question_1">Young Girl</label>
                          </div>
                          <div class="radio">
                            <label><input v-model="answer1" value="family" type="radio" name="question_1">Happy Family</label>
                          </div>
                    </div>
                </div>
                <div class="col-md-4 col-lg-4">
                      <div class="row plain-element">
                          <h5>Keyword, that RESTBank customers will more likely associate with home insurance with is:</h5>
                      </div>
                      <div class="row text-left row-choice">
                          <div class="radio">
                              <label><input v-model="answer2" value="trust" type="radio" name="question_2">Trust</label>
                          </div>
                          <div class="radio">
                              <label><input v-model="answer2" value="family_home" type="radio" name="question_2">Home</label>
                          </div>
                      </div>
                </div>
                <div class="col-md-4 col-lg-4">
                      <div class="row plain-element">
                          <h5>RESTBank Customers will more likely buy home insurance if bundled with:</h5>
                      </div>
                      <div class="row text-left row-choice">
                          <div class="radio">
                              <label><input v-model="answer3" value="cash" type="radio" name="question_3">Cash Bonus</label>
                          </div>
                          <div class="radio">
                              <label><input v-model="answer3" value="car" type="radio" name="question_3">Discount on Car Insurance</label>
                          </div>
                      </div>
                </div>
            </div>
            <div class="row plain-element">
              <div class="col-md-4 col-lg-4">
                   <button type="submit" class="btn btn-form"><span>Create Statistical Customer <i class="far fa-arrow-alt-circle-right"></i></span></button>
              </div>
            </div>
            <div class="row plain-element">
              <span class="inline-error">{{ error }}</span>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
</template>


<script>
import { apiService } from "@/common/api.service.js";


export default {
  name: "AdCampaign",
  components: {

  },
  data() {
    return {
      answer1: null,
      answer2: null,
      answer3: null,
      error: null,
    }
  },
  methods: {
    onSubmit() {
      if (!this.answer1 || !this.answer2 || !this.answer3)  {
        this.error = "Please predefine customer preferences above"
      }
      else {
        this.error = null;
        let endpoint = "/api/calculate-results";
        let method = "POST";
        apiService(endpoint, method, {answer_1: this.answer1, answer_2: this.answer2 , answer_3: this.answer3})
          .then(data => {
          if (data.non_field_errors) {
              this.error = data.non_field_errors[0]
          } else if (!data) {
              window.console.log("Something went wrong. We couldn't proceed with your cash transfer")
          } else {
              this.$router.push({
              name: 'results',
              params: { results: data }
              })
          }
        })
      }

    }
  },
  created() {
    document.title = "Ad Campaign with AI";
  }

}
</script>